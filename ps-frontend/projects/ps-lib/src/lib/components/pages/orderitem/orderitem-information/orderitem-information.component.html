<lib-panel *ngIf="call" [data]="call" [buttonsLeft]="buttonsLeft" [pageType]="pageType" [buttonsRight]="buttonsRight" [title]="'Melding informatie'">
  <lib-panel-title>
    <div  class="row details-main">
      <div class="col-sm-12 details-main-header">
        <lib-details-header [data]="headerData"></lib-details-header>
      </div>
      <lib-panel-info-second class="d-none d-xl-block col-xl-6" 
        [call]="call" 
        [order]="order" 
        [urlNotes]="postUrlNote" 
        [urlImages]="getUrlImages"
        [urlImage]="getUrlImage"
        [urlImageUpload]="postUrlImage"></lib-panel-info-second>
      <div class="col-12 col-xl-6">
        <div  class="orderitem-handle">
          <div class="orderitem-handle-title">
            <h4>Bestekposten aanvullen</h4>
          </div>
          <div class="orderitem-handle-list">
            <div class="orderitem-item" *ngFor="let orderitem of orderitems">
              <div class="orderitem-item-checkbox">
                <lib-checkbox-field
                  [id]="'orderitem-select-'+orderitem?.data?.quotationNumber"
                  [data]="orderitem"
                  [name]="orderitem.name"
                  [value]="orderitem?.selected"
                  (changed)="onOrderitemChecked($event)"
                  #orderItemCheckedfield>{{orderitem?.data?.name}}</lib-checkbox-field>
              </div>
              <div class="orderitem-item-amount">
                <lib-text-field
                  [id]="'orderitem-amount-'+orderitem?.data?.quotationNumber"
                  [style]="'small'"
                  [data]="orderitem"
                  [type]="'number'"
                  [value]="orderitem?.data?.amount"
                  [placeholder]="'Aantal'"
                  [required]="true"
                  (changed)="onOrderitemAmountChanged($event)"
                  #orderItemAmountfield></lib-text-field>
              </div>
              <div class="orderitem-item-unit">{{orderitem?.data?.unit}}</div>
            </div>
          </div>

          <div class="orderitem-handle-list">
            <div class="orderitem-misc-item" *ngFor="let orderitem of miscOrderitems; let i = index">
              <div class="orderitem-misc-item-row">
                <div class="orderitem-misc-item-checkbox">
                  <lib-checkbox-field
                    [id]="'orderitem-misc-select-'+ i"
                    [data]="orderitem"
                    [name]="orderitem?.name"
                    [value]="orderitem?.selected"
                    (changed)="onMiscOrderitemChecked($event)"
                    #miscOrderItemCheckedfield>{{orderitem?.name}}</lib-checkbox-field>
                </div>
                <div class="orderitem-misc-name">
                  <lib-text-field
                  [id]="'orderitem-misc-name-' + i"
                  [style]="'small'"
                  [data]="orderitem"
                  [value]="orderitem?.data?.name"
                  [placeholder]="'Omschrijving'"
                  [required]="true"
                  (changed)="onMiscOrderitemNameChanged($event)"
                  #miscOrderItemNamefield></lib-text-field>
                </div>
              </div>
              <div class="orderitem-misc-item-row">
                <div class="orderitem-misc-amount">
                  <lib-text-field
                    [id]="'orderitem-misc-amount-' + i"
                    [style]="'small'"
                    [data]="orderitem"
                    [type]="'number'"
                    [value]="orderitem?.data?.amount"
                    [placeholder]="'Aantal'"
                    [required]="true"
                    (changed)="onMiscOrderitemAmountChanged($event)"
                    #miscOrderItemAmountfield></lib-text-field>
                </div>
                <div class="orderitem-misc-unit">
                  <lib-text-field
                  [id]="'orderitem-misc-unit-' + i"
                  [style]="'small'"
                  [data]="orderitem"
                  [value]="orderitem?.data?.unit"
                  [placeholder]="'Eenheid'"
                  [required]="true"
                  (changed)="onMiscOrderitemUnitChanged($event)"
                  #miscOrderItemUnitfield></lib-text-field>
                </div>
                <div class="orderitem-misc-cost">
                  <lib-text-field
                    [id]="'orderitem-misc-cost-' + i"
                    [style]="'small'"
                    [data]="orderitem"
                    [type]="'number'"
                    [value]="orderitem?.data?.cost"
                    [placeholder]="'Totaal bedrag'"
                    [required]="true"
                    (changed)="onMiscOrderitemCostChanged($event)"
                    #miscOrderItemCostfield></lib-text-field>
                </div>
              </div>
            </div>
          </div>
          <div class="orderitem-add-misc-item row">
            <div class="col-12 col-xl-6">
              <lib-btn-contained (clicked)="addMisc()">Extra diversen regel</lib-btn-contained>
            </div>
          </div>
          <div class="order-explanation">
            <h4>Notitie gereedmelding</h4>
            <lib-textarea-field class="explanation-field" 
              [id]="'explanation'" [name]="'explanation'"
              [value]="order?.explanation" [placeholder]="'Vul uw notitie van maximaal 1000 karakters in'"
              [required]="true" [maxLength]="1000" (changed)="onExplanationChanged($event)"
              #explanationField>
            </lib-textarea-field>
            
          </div>

        </div>
      </div>
    </div>
  </lib-panel-title>
</lib-panel>
